<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="a17ddcf0-295a-424c-bc1c-ebf77aeae16a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="TC_005_CustomerProjectOrder_AZURE URI_GetByAccount" searchProperties="true" disabled="true" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="a17ddcf0-295a-424c-bc1c-ebf77aeae16afileName">TC_005_CustomerProjectOrder_AZURE-URI_GetByAccount</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="restrequest" name="REST Request" id="ca599ba2-6dd4-447c-a54f-070de0b9ae4a" disabled="true"><con:settings/><con:config service="REST Service 34" resourcePath="/api/customerprojectorder/companycode/l1/projectnumber/MD00000450" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request" id="e639004a-b996-45b0-9d3d-fd07a96f7d7d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://mum-dev:5005</con:endpoint><con:request/><con:originalUri>http://mum-dev/api/customerprojectorder/companycode/l1/projectnumber/MD00000450</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_Set Counter" id="dd3259ad-d66d-466c-ac9d-31b2a5ae8d87"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("Counter", "-1")</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_Increment Counter" id="dcf68f2c-0dc8-4fd4-8875-1c0a57bb076c"><con:settings/><con:config><script>def i = testRunner.testCase.getPropertyValue("Counter")
//def counter_inc

def counter_inc = i.toInteger() + 1


testRunner.testCase.setPropertyValue("Counter", counter_inc.toString())

log.info "Current Counter Value :" +testRunner.testCase.getPropertyValue("Counter")</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_Count Lines in the txt file" id="913f152b-8700-4a9a-8ffb-e32238616c06"><con:settings/><con:config><script>



File file = new File("C:\\Users\\cdeyso\\Desktop\\RnD\\DataSheets\\DataSheets_CustomerProjectOrder\\L1_Korea\\pr01003_l1_Account.txt")

log.info "Below is the content of the file line by line ${file.absolutePath}"

def lineNo = testRunner.testCase.getPropertyValue("Counter").toInteger()

def lines = file.readLines()
if(lines[lineNo] != null)
{
	log.info "There are more Lines!"
	testRunner.testCase.setPropertyValue("LineCount", lineNo.toString())
}
else
{
	testRunner.testCase.setPropertyValue("LineCount", lineNo.toString())
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_SetDynamicURL" id="3cb83dba-9fbe-4779-b6d7-268bae9cc8c0"><con:settings/><con:config><script>

//Set the variable part of the Get Method

//File("C:\\Users\\cdeyso\\Desktop\\RnD\\DataSheets\\DataSheets_CustomerProjectOrder\\j4\\GetByProductName.txt")

File file = new File("C:\\Users\\cdeyso\\Desktop\\RnD\\DataSheets\\DataSheets_CustomerProjectOrder\\L1_Korea\\pr01003_l1_Account.txt")

log.info "Below is the content of the file line by line ${file.absolutePath}"

def lineNo = testRunner.testCase.getPropertyValue("Counter").toInteger()

def lines = file.readLines()
if(lines[lineNo] != null)
{
//log.info  "Here is the first line: ${lines[lineNo]}"
context["host"]= "mum-dev"
context["port"]= "5005"
context["context1"]= "api/customerprojectorder/companycode/l1/account/"///AAIR01"
context["context2"] = "${lines[lineNo]}"

context["colon"] = ":"
context["backslash"] = "/"
//log.info context["RestfulURI"]

 log.info "http://" + context["host"] + context["colon"] +context["port"] + context["backslash"] +context["context1"]+context["context2"]

//${endpoint}

//testRunner.gotoStepByName("REST Request")
testRunner.gotoStepByName("REST Request_GetByAccount")
}
else 
{
	//testRunner.testCase.setPropertyValue("LineCount", lineNo.toString())
               testRunner.gotoStepByName("Send Mail")
}
//==========================================================================
//context["context2"]="AAIR01"//

 

// log.info "http://" + context["host"] + context["colon"] +context["port"] + context["backslash"] +context["context1"]+context["backslash"]+context["context2"]


//http://mum-dev:5002/api/customer/companycode/n1/customerCode/AAIR01

//http://mum-dev:5002/api/customer/companycode/n1/customerCode/AAIR01
//http://mum-dev:5002/api/customer/companycode/n1/customerCode/AAIR01
 
//http://${host}${colon}${port}${backslash}${context1}${backslash}${context2} </script></con:config></con:testStep><con:testStep type="restrequest" name="REST Request_GetByAccount" id="1163ca76-c5d8-43bc-af83-51f600b2d296"><con:settings/><con:config service="REST Service 35" resourcePath="/" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request_GetByAccount" id="d3979b65-3894-4c15-a0ae-59591944efd5" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://${host}${colon}${port}${backslash}${context1}${context2}</con:endpoint><con:request/><con:originalUri>http://mum-dev/api/customerprojectorder/companycode/j4/customerPONo/7000128779/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_ValidateAccount_Entries" id="4851cf52-8894-4f29-9c99-19e850930cac"><con:settings/><con:config><script>

import groovy.json.JsonSlurper
import static com.jayway.jsonpath.JsonPath.parse
import jxl.*

def getAzureResponse = testRunner.testCase.getTestStepByName("REST Request_GetByAccount").getPropertyValue("Response")
def CusId = parse(getAzureResponse).read('$..Account')

log.info CusId.size()

for(def var = 0; var &lt;=  CusId.size(); var++)
{
	if(CusId[var] != null)
	{
		log.info "No. of Entries = "+CusId.size()
		log.info "Valid Entries Returned."
	}
}

/*
if(CusId.size() == 1)
{
	log.info "Correct No of entries of for the Project Number is returned."
	log.info "No. of Entries = "+CusId.size()
}
*/</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_ValidateAllEntries" id="0f4f5b78-927a-4c2f-a99c-55a26325cadd"><con:settings/><con:config><script>

import groovy.json.JsonSlurper
import static com.jayway.jsonpath.JsonPath.parse
import jxl.*

//try
//{
def getAzureResponse = testRunner.testCase.getTestStepByName("REST Request_GetByAccount").getPropertyValue("Response")
def CusId = parse(getAzureResponse).read('$..Account')

File file = new File("C:\\Users\\cdeyso\\Desktop\\RnD\\DataSheets\\DataSheets_CustomerProjectOrder\\L1_Korea\\pr01003_l1_Account.txt")

log.info "Below is the content of the file line by line ${file.absolutePath}"

def lineNo = testRunner.testCase.getPropertyValue("Counter").toInteger()

def lines = file.readLines()
log.info CusId.size()
if(lines[lineNo] != null)
{
	 projectNumber = "${lines[lineNo]}"
	//log.info projectNumber

	for(def var = 0; var &lt;=  CusId.size(); var++)
{
	if(CusId[var] == projectNumber)
	{
		log.info "No. of Entries = "+CusId.size()
		log.info "Valid Entries Returned."
	}
}
}
else
{
	testRunner.gotoStepByName("Groovy Script_GetByProjectNumber_Response time")
	//testRunner.gotoStepByName("Send Mail on TS Fail")
}


//log.info projectNumber

/*
for(def var = 0; var &lt;=  CusId.size(); var++)
{
	if(CusId[var] == projectNumber)
	{
		log.info "No. of Entries = "+CusId.size()
		log.info "Valid Entries Returned."
	}
}
*/
/*
}
catch(NullPointerException e)
{
	log.info e.printStackTrace()	
	testRunner.gotoStepByName("Send Mail on TS Fail")
}
*/
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_Rerun Test Step" id="21fcd5f5-4b78-4309-8105-f3acebed74df"><con:settings/><con:config><script>/*
def i = testRunner.testCase.getPropertyValue("Counter").toInteger()
def j = testRunner.testCase.getPropertyValue("LineCount").toInteger()


if(i &lt;= j)
{
testRunner.gotoStepByName("Groovy Script_Increment Counter")
}
else
{
	log.info "All entriees checked!"
	testRunner.gotoStepByName("Groovy Script_GetByProjectName_Response time")
	
}
*/

//========================================================================================================================================

File file = new File("C:\\Users\\cdeyso\\Desktop\\RnD\\DataSheets\\DataSheets_CustomerProjectOrder\\L1_Korea\\pr01003_l1_Account.txt")

log.info "Below is the content of the file line by line ${file.absolutePath}"

def lineNo = testRunner.testCase.getPropertyValue("LineCount").toInteger()

def lines = file.readLines()
if(lines[lineNo] != null)
{
	testRunner.gotoStepByName("Groovy Script_Increment Counter")
}
else
{
	log.info "All entriees checked!"
	testRunner.gotoStepByName("Groovy Script_GetByAccount_Response time")
	
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script_GetByAccount_Response time" id="3601caf5-05dd-48ab-90f6-1882aeb6fd42"><con:settings/><con:config><script>
//def iTime = testRunner.timeTaken
/*
def iTime = testRunner.testCase.testSteps["REST Request"].timeTaken

log.info iTime 

if(iTime &lt;= 30000 ){
	log.info "Test case get response within time"
	log.info "Test case taken time is" + " " + testRunner.getTimeTaken();
	}else{
		testRunner.fail("Test Case taken time beyond the limit")
	     log.error "Test case taken time is" + " " + testRunner.getTimeTaken();
		log.info "Test case failed"
	 
	}
	*/

	def response_time = testRunner.testCase.testSteps["REST Request_GetByAccount"].testRequest.response.timeTaken

	log.info response_time

	if(response_time &lt;= 500)
	{
		log.info "Response time is as expected!"
		testRunner.gotoStepByName("Send Mail on Correct Response time for URL")
	}
	else
	{
		log.error "Response time exceeded expected time!"
		testRunner.gotoStepByName("Send Mail on Incorrect Response time for URL")
	}
</script></con:config></con:testStep><con:testStep type="sendmailteststep" name="Send Mail on Incorrect Response time for URL" id="b3f61a6f-4f3c-45b8-9f86-3b6ae4f0575f" disabled="true"><con:settings/><con:config><subject>Alert on Response time Authentication | Microservices</subject><message>Hi! This is a Test Case Failure report.

Validation : Response time of the REST request should be less than 500ms -- has ben Authenticated.

Note : This is an auto generated e-mail for validation purposes only. PLEASE DO NOT REPLY !! </message><server>webmail.jci.com</server><port>25</port><login>souvik.dey@jci.com</login><password>Jci@1111</password><mailTo>souvik.dey@jci.com</mailTo><mailFrom>souvik.dey@jci.com</mailFrom><timeout>5000</timeout><timeout_measure>1</timeout_measure></con:config></con:testStep><con:testStep type="sendmailteststep" name="Send Mail on Correct Response time for URL" id="88cf16b8-b01b-4f02-ba1e-65c7a273f3e6" disabled="true"><con:settings/><con:config><subject>Alert on Response time Fail | Microservices</subject><message>Hi! This is a Test Case Failure report.

Validation : Response time of the REST request should be less than 500ms -- has failed.

Note : This is an auto generated e-mail for validation purposes only. PLEASE DO NOT REPLY !! </message><server>webmail.jci.com</server><port>25</port><login>souvik.dey@jci.com</login><password>Jci@1111</password><mailTo>souvik.dey@jci.com</mailTo><mailFrom>souvik.dey@jci.com</mailFrom><timeout>5000</timeout><timeout_measure>1</timeout_measure></con:config></con:testStep><con:testStep type="sendmailteststep" name="Send Mail on TS Fail" id="f7096ee2-0f75-457b-8df4-bb992054ee99" disabled="true"><con:settings/><con:config><subject>Alert on Test Case Fail | Microservices </subject><message>Hi! This is a Test Case Failure report.

Validation Failure : NULL Value returned from the Microservice!

Note : This is an auto generated e-mail for validation purposes only. PLEASE DO NOT REPLY !! </message><server>webmail.jci.com</server><port>25</port><login>souvik.dey@jci.com</login><password>Jci@1111</password><mailTo>souvik.dey@jci.com</mailTo><mailFrom>souvik.dey@jci.com</mailFrom><timeout>5000</timeout><timeout_measure>1</timeout_measure></con:config></con:testStep><con:testStep type="restrequest" name="REST Request 2" id="cfab00ca-76e3-48cc-8287-bd62e7efbc7d" disabled="true"><con:settings/><con:config service="REST Service 36" resourcePath="/api/customerprojectorder/companycode/l1/startDate/2010-08-03/endDate/2011-02-28" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request 2" id="ee7337a6-4045-4335-8733-20c8ae0d8136" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://mum-dev:5005</con:endpoint><con:request/><con:originalUri>http://mum-dev/api/customerprojectorder/companycode/l1/startDate/2010-08-03/endDate/2011-02-28</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="REST Request 3" id="1be3059c-663f-4ae1-bc56-72dab57599bf" disabled="true"><con:settings/><con:config service="REST Service 37" resourcePath="/api/customerprojectorder/companycode/l1/projectname/CJ" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request 3" id="7416867e-5379-4777-b72f-954cee9fd0f3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://mum-dev:5005</con:endpoint><con:request/><con:originalUri>http://mum-dev/api/customerprojectorder/companycode/l1/projectname/CJ</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Counter</con:name><con:value>10</con:value></con:property><con:property><con:name>LineCount</con:name><con:value>10</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d51bab9c-b8f2-4dc2-b652-1c05225959cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8b401a59-f9b5-43e5-a26e-b9b7963e2202</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7323399e-2f59-4ba1-a14b-ea34facced87</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be58b38b-775d-42c6-81e0-d9a82e401ce0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a49880a0-252b-496f-be53-6febd2b43c62</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a89c2131-faca-4e3a-949c-351bfb3ade5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>